deploy      :; forge script script/DeploySpark.s.sol:DeploySpark --rpc-url ${ETH_RPC_URL} --sender ${ETH_FROM} --broadcast --verify --slow
deploy-sce  :; forge script script/DeploySparkConfigEngine.s.sol:DeploySparkConfigEngine --optimizer-runs 200 --rpc-url ${ETH_RPC_URL} --sender ${ETH_FROM} --broadcast --verify --slow
deploy-pool :; forge script script/DeployPoolImplementation.s.sol:DeployPoolImplementation --rpc-url ${ETH_RPC_URL} --sender ${ETH_FROM} --broadcast --verify --slow

# FIXME: do this inside the tests once Foundry adds support https://github.com/foundry-rs/foundry/issues/5291
# For now we pass libraries in via the command line
test-pool-v302-goerli  :; BYTECODE_CHECK=true forge test --mc SparkDeployPoolImplementation_GoerliPrimaryV302Test --mt test_poolImpl_bytecode_match -vvvv --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BorrowLogic.sol:BorrowLogic:0x10c6526cc71dbabce29d5759e2e5f01ca21721a8 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BridgeLogic.sol:BridgeLogic:0x530a9e5153278e89377a5a2dd8a113c4ec8560f0 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/EModeLogic.sol:EModeLogic:0x99fa5c3b5ca245787c79c70f667a24176e189d08 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/FlashLoanLogic.sol:FlashLoanLogic:0xA67d62f75F8D11395eE120CA8390Ab3bF01f0b8A --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/LiquidationLogic.sol:LiquidationLogic:0x0F9149c4d6018A5999AdA5b592E372845cfeC725 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/PoolLogic.sol:PoolLogic:0x216738c7B1E83cC1A1FFcD3433226B0a3B174484 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/SupplyLogic.sol:SupplyLogic:0x1B94E2F3818E1D657bE2A62D37560514b52DB17F
test-pool-v302-mainnet :; BYTECODE_CHECK=true forge test --mc SparkDeployPoolImplementation_EthereumPrimaryV302Test --mt test_poolImpl_bytecode_match -vvvv --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BorrowLogic.sol:BorrowLogic:0x2634a7554343350f3ff974eb76bcc378c6e05e19 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BridgeLogic.sol:BridgeLogic:0xf9733fcae7ce0e5447be317e212aa7612c1450ec --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/EModeLogic.sol:EModeLogic:0x21fc615cf9cbb3ced17ed622afdbbed3d909028d --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/FlashLoanLogic.sol:FlashLoanLogic:0x3B3e6550d6eB18F7A85e62E546b6dF475A939a89 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/LiquidationLogic.sol:LiquidationLogic:0xC9D8B33e77c4C62E051b6174D0cBb0C1F3EA067a --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/PoolLogic.sol:PoolLogic:0xb88BCb50F5364FA6b712E7A16D6Aa44B28a58F19 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/SupplyLogic.sol:SupplyLogic:0x5490340Ed948154B2cefb4E99f7A7C21F03afb18
