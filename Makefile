deploy      :; forge script script/DeploySpark.s.sol:DeploySpark --rpc-url ${ETH_RPC_URL} --sender ${ETH_FROM} --broadcast --verify --slow
deploy-sce  :; forge script script/DeploySparkConfigEngine.s.sol:DeploySparkConfigEngine --optimizer-runs 200 --rpc-url ${ETH_RPC_URL} --sender ${ETH_FROM} --broadcast --verify --slow
deploy-pool :; forge script script/DeployPoolImplementation.s.sol:DeployPoolImplementation --rpc-url ${ETH_RPC_URL} --sender ${ETH_FROM} --broadcast --verify --slow

# FIXME: do this inside the tests once Foundry adds support https://github.com/foundry-rs/foundry/issues/5291
# For now we pass libraries in via the command line
test-pool-v302-goerli  :; BYTECODE_CHECK=true forge test --mc SparkDeployPoolImplementation_GoerliPrimaryV302Test --mt test_poolImpl_bytecode_match -vvvv --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BorrowLogic.sol:BorrowLogic:0x10c6526cc71dbabce29d5759e2e5f01ca21721a8 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BridgeLogic.sol:BridgeLogic:0x530a9e5153278e89377a5a2dd8a113c4ec8560f0 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/EModeLogic.sol:EModeLogic:0x99fa5c3b5ca245787c79c70f667a24176e189d08 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/FlashLoanLogic.sol:FlashLoanLogic:0x782569c705c0eb460040eedd30bf27ba06374efb --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/LiquidationLogic.sol:LiquidationLogic:0xb13617f468a464b1103b628379e428ced07738a4 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/PoolLogic.sol:PoolLogic:0xe87f0b8d49e8d74ddaa3f886a0e5c27280236fc3 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/SupplyLogic.sol:SupplyLogic:0x38c45a91f2b69b25e115238c8e82548fb20131be
test-pool-v302-mainnet :; BYTECODE_CHECK=true forge test --mc SparkDeployPoolImplementation_EthereumPrimaryV302Test --mt test_poolImpl_bytecode_match -vvvv --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BorrowLogic.sol:BorrowLogic:0x2634a7554343350f3ff974eb76bcc378c6e05e19 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BridgeLogic.sol:BridgeLogic:0xf9733fcae7ce0e5447be317e212aa7612c1450ec --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/EModeLogic.sol:EModeLogic:0x21fc615cf9cbb3ced17ed622afdbbed3d909028d --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/FlashLoanLogic.sol:FlashLoanLogic:0xc9d8b33e77c4c62e051b6174d0cbb0c1f3ea067a --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/LiquidationLogic.sol:LiquidationLogic:0xb88bcb50f5364fa6b712e7a16d6aa44b28a58f19 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/PoolLogic.sol:PoolLogic:0x5490340ed948154b2cefb4e99f7a7c21f03afb18 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/SupplyLogic.sol:SupplyLogic:0xfc54d179e05781939af5f4af9aad24966f4e1e04
