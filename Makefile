deploy      :; forge script script/DeploySpark.s.sol:DeploySpark --rpc-url ${ETH_RPC_URL} --sender ${ETH_FROM} --broadcast --verify --slow
deploy-sce  :; forge script script/DeploySparkConfigEngine.s.sol:DeploySparkConfigEngine --optimizer-runs 200 --rpc-url ${ETH_RPC_URL} --sender ${ETH_FROM} --broadcast --verify --slow
deploy-pool :; forge script script/DeployPoolImplementation.s.sol:DeployPoolImplementation --rpc-url ${ETH_RPC_URL} --sender ${ETH_FROM} --broadcast --verify --slow

# FIXME: do this inside the tests once Foundry adds support https://github.com/foundry-rs/foundry/issues/5291
# For now we pass libraries in via the command line
test-pool-v302-goerli  :; BYTECODE_CHECK=true forge test --mc SparkDeployPoolImplementation_GoerliPrimaryV302Test --mt test_poolImpl_bytecode_match -vvvv --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BorrowLogic.sol:BorrowLogic:0x10c6526cc71dbabce29d5759e2e5f01ca21721a8 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BridgeLogic.sol:BridgeLogic:0x530a9e5153278e89377a5a2dd8a113c4ec8560f0 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/EModeLogic.sol:EModeLogic:0x99fa5c3b5ca245787c79c70f667a24176e189d08 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/FlashLoanLogic.sol:FlashLoanLogic:0xA67d62f75F8D11395eE120CA8390Ab3bF01f0b8A --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/LiquidationLogic.sol:LiquidationLogic:0x0F9149c4d6018A5999AdA5b592E372845cfeC725 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/PoolLogic.sol:PoolLogic:0x216738c7B1E83cC1A1FFcD3433226B0a3B174484 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/SupplyLogic.sol:SupplyLogic:0x1B94E2F3818E1D657bE2A62D37560514b52DB17F
test-pool-v302-mainnet :; BYTECODE_CHECK=true forge test --optimizer-runs 200 --mc SparkDeployPoolImplementation_EthereumPrimaryV302Test --mt test_poolImpl_bytecode_match -vvvv --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BorrowLogic.sol:BorrowLogic:0x5d834EAD0a80CF3b88c06FeeD6e8E0Fcae2daEE5 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/BridgeLogic.sol:BridgeLogic:0x57572C9e795F4B6A748EFBeAB7E0a1B9996A0A24 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/EModeLogic.sol:EModeLogic:0xeAbd65827E91Ac3aE5471C11A329fbc675cA46d6 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/FlashLoanLogic.sol:FlashLoanLogic:0x0A62276bFBF1Ad8443f37Da8630d407408085c8b --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/LiquidationLogic.sol:LiquidationLogic:0xe175De51F29d822b86e46A9A61246Ec90631210D --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/PoolLogic.sol:PoolLogic:0xD5256981e08492AFc543aF2a779Af989E9f9F7e7 --libraries lib/aave-v3-core/contracts/protocol/libraries/logic/SupplyLogic.sol:SupplyLogic:0x39dF4b1329D41A9AE20e17BeFf39aAbd2f049128
